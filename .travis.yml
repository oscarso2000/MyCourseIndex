branches:
  only:
  - master
  - dev
sudo: required
os: linux
dist: bionic
language: generic
services:
- docker
python:
- 3.7
before_install:
- chmod +x ./deployment-setup/build_scripts/install-dependencies.sh
- chmod +x ./deployment-setup/build_scripts/inject-secrets.sh
- chmod +x ./deployment-setup/build_scripts/build-docker.sh
- chmod +x ./deployment-setup/build_scripts/deploy-k8s.sh
install:
- "./deployment-setup/build_scripts/install-dependencies.sh"
- "./deployment-setup/build_scripts/inject-secrets.sh"
script:
- "./deployment-setup/build_scripts/build-docker.sh"
- "./deployment-setup/build_scripts/deploy-k8s.sh"
env:
  global:
  - secure: vLiJv0EJFzpR9Rn9G8n0qC4sFrKna9oJE4yCXjiS04L8/A1Tk1nP91xOWRIirmORQ1VlSgplE1bTIVcJKlCfqIa0gXZ7/jPJwgkBBNGIc5cxQtda5HcvqpOIdu+pehrTray4l3usZ/60hqMeH/IynpqBk6O9UoRb3d36+PNYAD0LgabxQ4VWQRolCzgAiCSCDVPCXcgTuu8hVgjoTYRKtfSqDa3Odd57U7v8ujzJU2sSEbp23mDmRgiDm00KCh0xlesw6AXN55ORtnkd1YrWWuxI9Fh8nFW5hbNJ5UqRU/+yDYFGO++BCnFXOgz0fgO2ksIqFL0/C8XrUXl4QzcDndt6yylIO+5Akh1uTH1WQGk45hemYR6y36dqjjNbD5BVroabMYOua0JtXQVjlah9ees7oUJ8xS2JOr8hu7hmSjtXeRR2nRnki0iw9oYz7502YHzc9gIaDBTu1dy5c8VgRx+fLRbmIHN85v2esFQ1agokkSgDIWmhn7HbSN04xHgJOCN5VTrKM6hQe4bM7xpvhi8O0mFcwvaXDY39Wv295B9vRZF1eyjFOvkkNUwTnMk+UxjwK3EXoGX22Wo+daht7M5edxwmALlu86P1zqcb29SKgCDSu36EsE6VcZC0uXt6xpeepXtOCl6K/uL2DVORbtVsoyP5pGNuyt3ONlhC67o=
  - secure: IHU/mopDs7O3kIfrqwoIWlj5l+su7bMl/UGK83Bnzc6MhO0WnptHRaaN33M8K0vlbTTPb4RVU3POMnXHUD/gh8fEfebnBXRMj8Q2dwlEQvB5bbY5wmT3fSjvtweOo+GgTiNXIwwIQpLP3ZF0+RMdS2kuI3+siRw7YvnN4ZN2ID3k6viHrvf7HLrC/Z7pBee5Jza2QaGVB+pHWVtWG4RGj1MPYLRVWmNQYrLROhCfZlf9tniMjVJ/1Ejb61ykLFnHVI80vehiV+EL+YW0si14wqtD7xvCewKokGBUJcZd7DScf1v+wcdc9lcrLcHO1HXBaSGxNgPctfeWMUPY89MEgnyhOhO8Zl76SvS2tYToOWSVKbdxPR+HikGzeaPiJhDpLwLxqZY1uiVPNyPMCKNN8FtZFJYsvkXpc/ym/SbTzruA1kckbR8Zr0OMGYZ4cehzToLriOAu4bQceqP/MnzMyKElef/cVO+BjdCWHD+jwSp9C167XwgJmpj20rC7FD1mQ1XgZ4xmtLVE7s1hZvkXUbAnrBSbV5oSXU8Dd+tagjhWfdGevWF4b51EYGprxuVcuWp5OC0SW+GmyLZqJd9Ecc9O98dQMw8tRO5O+RdvbpQUWqJOoVu9DSG7YO77xC/EslklXG3ACjclo6zp7jLBLfZvMOz8FziECboZjcrwUuw=
  - secure: cP3gDMaH4a6lnmE3/LQWpEZEYA8Cgbg7BEhQLn/5ReO2hr5edwz7X5vEGpK19eIaumooU/QeQdyw48RfUoeRr0rG8B5GtOLLt+OnkrzTdUHSqkpX9cbLL2DXzWlMBAM/Adq3mzFFoK+o+Yb6l+zgyOb3KJ3ZrwgjOP7YwEooAhMMu9MHy9sLejxcfJppoZHDsnfh3T3BVK1fZ3WcsXTyG7gyBYHLmRIWuNzXmzvjbuAa257p9Y3ZKBtRE60jasTyHjvmLfPFhUhORK0JXiElTtVn647lXaLSLkCQ7GK/3KXISdzesgzXWhD20KQeQ2EAvQJ6EbbvLvRP098ugQ22pyq9/NlAGIDs3OQfz2lkODWIVvALCfyjaYobMvrnMWt4+eoO9Be9zK5LCyhNnziS7UFJSxZWCpBQKjiSH1nLoob8WE+E4TTiiHHudoDvsffBh4pcu+CwGrH2kGKyRKaov1li/cYe/rN+8ptoSGWGe81sePFrz/wGFrEtdCe7547j6eXgXKY0wH9954Hpwhf6er9hrbPe4BDz5sPaluzpyvY8IHon928mrLvGwjWF6UsRCv7OD9+nUe5I9OFB1WYYn5cLOxUAcqkBfxTHJm+bSSnR9mJ8WgOT0i0DO1Kf5P1XIfJyfIZoGKeWGQFPQ4NF3WPExRfI5Id/iIPRcH824vk=
  - secure: fFkrb1AX173QbXq94XolQIcdDvrs0CblldcgPqbCqleDy14VGoL08ddTPAVoKCP9GRvbY/C2Xyfbgvu03HY2mwW11mv6k/mD6T4SSqlQi3kaKoSdmsemyUXQQ/Q0VtJVmUlIsavMjApk5YKp8w4JWBjsW8YHkRgLfLSSU25nxl4oQzwyU4GxfszK8fCexivmqDV3ocQyadfX3PaENzXzqwLjGFK+LOX+rAmN7g/vcL+tXiO6nAF1lh+G63hicl38raI9B/P+Booa52v4Gi0muyQQsOJpdk5yFlfKevdUUfSvVCOG+4kwJYbtvH7BeV0ZJWZUiIat/ucQC8uxw2vzo+P1//j1Juek9vyQoXzdRSKpdMHkF1cTcvkiAM9TRkbi2QL3gac78YVrWnKPxxQPKsp+s+piffWSo1bqqL9d6s8rglaDu240I52g0JxithJ3HPvfDZi8pYcVc39oLXNPa+8ZfRSafNv/IN7BBfcWuJ8S2LmxAXLKXViL1vixQcfswPd0EAzapJ9M2rZlS0kQReMUw4SPQl+9ZbYi769P3d20+uleFLQj5vm6w4OZ61lCXn8BOMhsxRWtWNMytfCMEB37Epg70Dc7wt8iO41DV/8PcgTBYkchJAuULxXVT6ibF4bpc6i8RVYZ1QqAXSL3Egcswkm3oHGW31Wxf9NHEkQ=
  - secure: ARe3ChLbmoqbFRcEQHBW85ROKWoezhPvfEggaUX9xc3/6ihzWKbZoQXPfaku30cBjH+c+izEXsHrli0+Yksiauv1LF2NzQIl2glLz7O1PK3JFeS/xG/+3kl6WIQAed5fkj0+4fDO2o/aPfkwstMgJuaMZ2Ih8e0DblElOBtM1FKd4S/SxDe23Dv111Lt/XwQH4Z6LSQiaGyHb1U7m+HrwLw4hds5cOJsKIbECEVWtf3fszcq/qcUbYFlxQ26zTckGoD8kDrF8d4v35C41sBmTakcvIbQmeZWcMOSHoXzjp26fLIHsz847bKcH6JWmlLtmV/4lb7G9AaEN56tbwfh2hMx2lF0QtIvC4D4Soeg58uMqsN7gFRemhzTw+3QYigYXXnDdGWaMAtuQEPxZTFrbbSzVUtENwF5ZWloRKp0Mt6zVDfJQwd5fZRKtrwT4gD0oQs0q0LzCusI1aF8JvySZNlKD0dtBjavMR2T19Ae+a4sLuOoNFgiCQQQv1ccDJntk6aXi93D30C5aiXPzc+M8pPLLvhP0BWKm88EAP35aHfzC1a68wQwzZabThatrjA0+9kjZ+gcaA17o5uSm9c1y/raRzJXZn7gvxB7NwdtOJt5b0FsDj0Zjccl/zr0rb9PKZ3YeLS4q2c6iqU150SO7XKS7J/wER61DdwfHlzz0Uo=
